<template>
    <lightning-layout vertical-align="stretch" multiple-rows="true">
        <lightning-layout-item flexibility="auto" padding="around-small" size="12">
            <lightning-card icon-name="standard:case" title="Crear Caso">
                <lightning-layout vertical-align="stretch" multiple-rows="true">
                    <lightning-layout-item padding="around-small" size="6">
                        <lightning-combobox name="tipoRegistro" label="Seleccione el Tipo de Caso"
                            options={data.listTiporegistro} value={data.registroSeleccionado} onchange={onchangeFilter} type="radio">
                        </lightning-combobox>
                    </lightning-layout-item>
                    <lightning-layout-item padding="around-small" size="6">
                        <lightning-combobox name="producto" label="Seleccione un Producto"
                            value={data.productoSeleccionado} options={data.listProductos} onchange={onchangeFilter}
                            placeholder="Seleccione un Producto"></lightning-combobox>
                    </lightning-layout-item>

                    <lightning-layout-item padding="around-small" size="6">
                        <lightning-combobox name="modulo" label="Seleccione un M贸dulo" value={data.moduloSeleccionado}
                            options={data.listModulos} onchange={onchangeFilter} placeholder="Seleccione un M贸dulo">
                        </lightning-combobox>
                    </lightning-layout-item>
                    <lightning-layout-item padding="around-small" size="6">
                        <lightning-input type="text" label="Asunto de Caso" name="asunto" onchange={onchangeFilter} value={data.asunto} ></lightning-input>
                    </lightning-layout-item> 

                    <lightning-layout-item padding="around-small"  size="12" >
                        <lightning-input-rich-text  value={data.descripcion} onchange={onchangeFilter} name="descripcion" label="Descripci贸n" title="Descripci贸n" ></lightning-input-rich-text>
                    </lightning-layout-item>

                        <lightning-layout-item padding="around-small"  size="10" >
                            <lightning-file-upload  label="Subir Archivo"  name="subirArchivo" record-id={data.contactId}
                            onuploadfinished={finalizaCargaArchivo} multiple >
                        </lightning-file-upload>
                        <template for:each={data.listArchivos} for:item="arch">
                            <p key={arch.value}>{arch.label} &nbsp;&nbsp;&nbsp;<a name={arch.value} onclick={popEliminar} >Eliminar </a></p>
                        </template>
                    </lightning-layout-item>
                    <lightning-layout-item padding="around-small"  size="2" >
                        <lightning-button label="Crear Caso"  style="width: 100%;" title="Crear Caso" variant="brand" name="crearCaso"
                            class="slds-m-left_x-small" disabled={data.habilitarBoton} onclick={clickCrearCaso} ></lightning-button>
                    </lightning-layout-item>
                </lightning-layout>
            </lightning-card>
        </lightning-layout-item>
    </lightning-layout>

    <template if:true={data.popEliminar}>
        <section role="dialog" tabindex="-1" aria-labelledby="modal-heading-01" aria-modal="true"
            aria-describedby="modal-content-id-1" class="slds-modal slds-fade-in-open">
            <div class="slds-modal__container">
                <header class="slds-modal__header">
                    <h1 id="modal-heading-02" class="slds-text-heading_medium slds-hyphenate">Eliminar Archivos</h1>
                </header>
                <div class="slds-modal__content slds-p-around_medium ">
                    <div class="slds-form slds-form_compound slds-align--absolute-left">
                        <fieldset class="slds-form-element">
                            <div class="slds-modal__content slds-p-around--medium">
                                <h1>Esta seguro que desea eliminar el archivo: {data.archivoEliminar.label} </h1> 
                            </div>
                            <footer class="slds-modal__footer">
                                <lightning-button label="Cancelar" title="Cancelar" onclick={cancelar}
                                    class="slds-m-left_x-small"></lightning-button>
                                <lightning-button label="Guardar" title="Guardar" variant="brand" name="guardar"
                                    class="slds-m-left_x-small" onclick={eliminarArchivo} disabled={data.botonDeshabilitado} ></lightning-button>
                            </footer>
                        </fieldset>
                    </div>
                </div>
            </div>
        </section>
        <div class="slds-backdrop slds-backdrop_open"></div>
    </template>

    <template if:true={showSpinner}>
        <div id="activityIndicator" class="slds-spinner_container">
            <div class="slds-spinner--brand slds-spinner slds-spinner--large" role="alert">
                <span class="slds-assistive-text">Loading, Please Wait...</span>
                <div class="slds-spinner__dot-a"></div>
                <div class="slds-spinner__dot-b"></div>
            </div>
        </div>
    </template>
</template>